{"name":"Pamusb","tagline":"USB One Time Password Authentication - Ubuntu","body":"#PAM USB OTP Authentication\r\n-----------\r\n\r\n####Ubuntu => /etc/pam.d/common-auth \r\n\r\n####Fedora/RHEL/CentOS => /etc/pam.d/system-auth \r\n\r\n* Install dependencies Ubuntu/Debian\r\n\r\n```\r\nsudo apt-get install libpam-usb pamusb-tools\r\n```\r\n\r\n* Install dependencies Fedora/RHEL/CentOS/Gentoo\r\n\r\n```\r\nsudo yum -y install libxml2 pam udisks pmount\r\n```\r\n\r\n* For Fedora/RHEL/CentOS\r\n\r\n```\r\ngit clone https://github.com/aluzzardi/pam_usb.git\r\ncd pam_usb\r\nmake \r\nmake install\r\n```\r\n\r\n* Gentoo Instructions [Gentoo pam_usb](https://forums.gentoo.org/viewtopic-t-305540-start-0.html)\r\n\r\n```\r\nemerge pam_usb\r\n```\r\n\r\n\r\n* Configure USB Device \r\n* \r\n```\r\npamusb-conf --add-device $MY_DEVICE_ALIAS\r\n```\r\n\r\n* Configure user accounts to authenticate with USB \r\n\r\n```\r\npamusb-conf --add-user root\r\npamusb-conf --add-user $some_other_user_name\r\n```\r\n\r\n* Check user account configurations \r\n\r\n```\r\npamusb-check root\r\n```\r\n\r\n* Setup PAM System Authentication process Ubuntu EDIT:  **/etc/pam.d/common-auth** RHEL/CentOS/Fedora EDIT: **/etc/pam.d/system-auth** \r\n  The file should look like this post configuration changing only these lines\r\n\r\n```\r\nauth    sufficient      pam_usb.so\r\n#auth   [success=1 default=ignore]      pam_unix.so nullok_secure try_first_pass\r\nauth    required                        pam_unix.so nullok_secure\r\n```\r\n\r\n* Setup screen saver lock upon USB device removal EDIT: **/etc/pamusb.conf** - example syntax format for the **root** user account \r\n\r\n```\r\n</user><user id=\"root\">\r\n        <device>falcon-usb-stick</device>\r\n        <agent event=\"lock\">gnome-screensaver-command --lock</agent>\r\n        <agent event=\"unlock\">gnome-screensaver-command --deactivate</agent>\r\n</user></users>\r\n```\r\n\r\n* Configure the pamusb-agent to startup at Login as a daemon process - under Ubuntu \r\n\r\n####SEARCH -> Startup Applications -> Add\r\n\r\n```\r\n/usr/bin/pamusb-agent --daemon\r\n```\r\n\r\n* Logout & Login - You have now successfully configured utilizing USB removable device as a One Time Password Authentication Mechanism \r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}